!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("object"==typeof module&&module.exports)module.exports=t();else{var n=e.bglib,r=e.bglib=t();r.noConflict=function(){return e.bglib=n,r}}}(window,function(){var r,e,t,n,o,i,a,s,u,l,c,d,h,p,f,m,g,v,y,b,E,w,x,O,A,S,j,C,_="undefined"!==window.jQuery?window.jQuery:null,T={name:"bglib",version:"1.0",modules:{}},D=function(){};return D.fn={},D.getName=function(){return T.name},D.getVersion=function(){return T.version},D.fn.call=function(e,t){return e.apply(null,t)},Date.getMonthName||(Date.label={month:["January","February","March","April","May","June","July","August","September","October","November","December"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Date.label.month.abbr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Date.label.day.abbr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Date.getMonthName=function(e,t){return 12<e?e=12:e<1&&(e=1),e-=1,(t=t||!1)?Date.label.month.abbr[e]:Date.label.month[e]}),Date.getMonthIndex||(Date.getMonthIndex=function(e){e=e.toLowerCase().uppercaseFirst();var t=Date.label.month.indexOf(e);return-1===t&&(t=Date.label.month.abbr.indexOf(e)),-1!==t?t+1:null}),Date.getDayName||(Date.getDayName=function(e,t){return 7<e?e=7:e<1&&(e=1),e-=1,(t=t||!1)?Date.label.day.abbr[e]:Date.label.day[e]}),Date.getDayIndex||(Date.getDayIndex=function(e){e=e.toLowerCase().uppercaseFirst();var t=Date.label.day.indexOf(e);return-1===t&&(t=Date.label.day.abbr.indexOf(e)),-1!==t?t+1:null}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.uppercaseFirst||(String.prototype.uppercaseFirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),String.prototype.lowercaseFirst||(String.prototype.lowercaseFirst=function(){return this.charAt(0).toLowerCase()+this.slice(1)}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.concatUnique||(Array.prototype.concatUnique=function(e){for(var t=0;t<e.length;t++)-1===this.indexOf(e[t])&&this.push(e[t]);return this}),Array.prototype.pushUnique||(Array.prototype.pushUnique=function(e){return-1===this.indexOf(e)&&this.push(e),this}),window.isObject||(window.isObject=function(e){return null!==e&&("function"==typeof e||"object"==typeof e)}),Object.isObject||(Object.isObject=window.isObject),Object.copy||(Object.copy=function(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();return Object.assign(t,e)}),Object.copyMerge||(Object.copyMerge=function(e,t){return Object.assign(Object.copy(e),t)}),Object.deepMerge||(Object.deepMerge=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)return{};var t=!1;2<e.length&&!0===e[e.length-1]&&(t=!0,e.pop());for(var n=t?Object.assign({},e.shift()):e.shift(),r=0;r<e.length;r++)for(var i in e[r])e[r].hasOwnProperty(i)&&(Object.isObject(e[r][i])&&!Array.isArray(e[r][i])&&n.hasOwnProperty(i)&&Object.isObject(n[i])?n[i]=Object.deepMerge(n[i],e[r][i],!0):Array.isArray(e[r][i])&&n.hasOwnProperty(i)&&Array.isArray(n[i])?n[i]=n[i].concat(e[r][i]):(Object.isObject(e[r][i])&&(e[r][i]=Object.assign({},e[r][i])),n[i]=e[r][i]));return n}),Object.deepCopyMerge||(Object.deepCopyMerge=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)return{};for(var t=Object.assign({},e.shift()),n=0;n<e.length;n++)for(var r in e[n])e[n].hasOwnProperty(r)&&(Object.isObject(e[n][r])&&!Array.isArray(e[n][r])&&t.hasOwnProperty(r)&&Object.isObject(t[r])?t[r]=Object.deepCopyMerge(t[r],e[n][r]):Array.isArray(e[n][r])&&t.hasOwnProperty(r)&&Array.isArray(t[r])?t[r]=t[r].concat(e[n][r]):(Object.isObject(e[n][r])&&(e[n][r]=Object.assign({},e[n][r])),t[r]=e[n][r]));return t}),Object.keys||(Object.keys=function(){"use strict";var i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=a.length;return function(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var t,n,r=[];for(t in e)i.call(e,t)&&r.push(t);if(o)for(n=0;n<s;n++)i.call(e,a[n])&&r.push(a[n]);return r}}()),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,n){var r=this[t],i=r;delete this[t]&&Object.defineProperty(this,t,{get:function(){return i},set:function(e){return r=i,i=n.call(this,t,r,e)},enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}}),JSON.safeParse||(JSON.safeParse=function(t,e){if(e=void 0!==e?e:null,null===t)return null;try{t=JSON.parse(t)}catch(e){t=null}return t}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(this))return null;do{if(t.matches(e))return t;t=t.parentElement}while(null!==t);return null}),Function.prototype.bind||(r=Array.prototype.slice,Function.prototype.bind=function(){var e=this,t=arguments[0],n=r.call(arguments,1);if("function"!=typeof e)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){return n.push.apply(n,arguments),e.apply(t,n)}}),D.create=function(e,t,n){if(e=e||{},t=t||{},n=n||"Base",T.modules.hasOwnProperty(n)||(n="Base"),T.modules.hasOwnProperty(n))return T.modules[n].extend(e,t)},D.noop=function(){},D.setRegisteredModule=function(e,t){T.modules[e]=t},D.fn.debounce=function(n,r){var i;return function(){var e=this,t=arguments;clearTimeout(i),i=setTimeout(function(){n.apply(e,t)},r)}},function(e,t){"use strict";e=e||"docReady",t=t||window;var n=[],r=!1,i=!1;function o(){if(!r){r=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function a(){"complete"===document.readyState&&o()}t[e]=function(e,t){if("function"!=typeof e)throw new TypeError("callback for docReady(fn) must be a function");r?setTimeout(function(){e(t)},1):(n.push({fn:e,ctx:t}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(o,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):(document.attachEvent("onreadystatechange",a),window.attachEvent("onload",o)),i=!0))}}("documentReady",D.fn),D.fn.toEm=function(e,t){t=t||document.querySelector("body"),e=parseInt(e,10);var n=document.createElement("div");n.innerHTML="&nbsp;",D.El.css(n,{display:"none","font-size":"1em",margin:0,padding:0,height:"auto","line-height":1,border:0}),t.appendChild(n);var r=parseFloat(D.El.css(n,"height"));return D.El.remove(n),(e/r).toFixed(8)+"em"},D.fn.toPx=function(e,t){t=t||document.querySelector("body"),e=parseFloat(e);var n=document.createElement("div");n.innerHTML="&nbsp;",D.El.css(n,{display:"none","font-size":"1em",margin:0,padding:0,height:"auto","line-height":1,border:0}),t.appendChild(n);var r=parseFloat(D.El.css(n,"height"));return D.El.remove(n),Math.round(e*r)+"px"},D.fn.formatDecimal=function(e,t){return t=t||2,e&&"0"!==e||(e=0),"string"==typeof e&&(e=e.replace(/[^\d\.]/g,"")),parseFloat(Math.round(100*e)/100).toFixed(t)},D.fn.formatPrice=function(e){return D.fn.formatDecimal(e,2)},D.fn.htmlEntities=function(e){return e.replace(/[\u00A0-\u9999<>\&]/gim,function(e){return"&#"+e.charCodeAt(0)+";"})},D.fn.interpolate=function(e,t){for(var n in t)e=e.replace(new RegExp("{{"+n+"}}","gm"),t[n]);return e},D.fn.iosVersion=function(e){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}return null},D.fn.rand=function(e){return e=e||1e8,Math.floor(Math.random()*e+1)},D.fn.request=function(e,t,n,r){n=n||{};var i="GET"!==(r=r||"GET");t=t||D.noop,t=D.DT.isFunction(t)?{success:t,error:D.noop}:Object.assign({success:D.noop,error:D.noop},t);var o=new XMLHttpRequest;o.open(r,e,!0),o.addEventListener("readystatechange",function(){4==o.readyState&&200==o.status?t.success(o.responseText,o,n):t.error(o.responseText,o,n)},!1),i?(o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(n))):o.send()},D.fn.toCamelCase=function(e){for(var t=e.split("-"),n=t.shift();t.length;)n+=t[0].uppercaseFirst(),t.shift();return n},D.fn.toProperCase=function(e){return D.fn.toCamelCase(e).uppercaseFirst()},e=D,(t=function(){}).extend=function(e,t){t=t||{};var n,r=this;return n=(e=e||{})&&e.hasOwnProperty("constructor")?e.constructor:function(){return r.apply(this,arguments)},n=Object.assign(n,r),(n=Object.assign(n,t)).prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object.assign(n.prototype,e),n.__parent=r,n},e.BaseModule=t.extend({constructor:function(){t.apply(this,arguments),this.init&&this.init.apply(this,arguments)}}),e.setRegisteredModule("Base",e.BaseModule),D.AppRouter=D.BaseModule.extend({routes:void 0,init:function(e){if(this.routes={},void 0!==e){var t=Object.deepCopyMerge({},e);this.setRoutes(t)}},processRoute:function(e){return void 0===e.defaults&&(e.defaults={}),void 0===e.requirements&&(e.requirements={}),e.defaultSlugs={keys:[],obj:{},arr:[]},e.pattern=e.pattern.replace(/\/+$/,""),""==e.pattern&&(e.pattern="/"),e.compiledRegex=this.compileRoute(e,e.pattern,e.defaults,e.requirements),e},compileRoute:function(e,t,n,r){var i=t.match(/({([^\/{}]+)})/g),o={};if(i)for(var a=0;a<i.length;a++){var s=i[a];i[a]=i[a].replace(/^({)|(})$/g,"");var u="([^\\/?#]+)";void 0!==r[i[a]]&&(u="("+r[i[a]]+")"),s="\\{"+i[a]+"\\}",e.defaultSlugs.keys.push(i[a]),void 0!==n[i[a]]?(e.defaultSlugs.obj[i[a]]=n[i[a]],e.defaultSlugs.arr.push(n[i[a]]),a==i.length-1&&(u="(?:\\/"+u+"|\\/)?",s="\\/"+s),delete e.defaults[i[a]]):(e.defaultSlugs.obj[i[a]]=void 0,e.defaultSlugs.arr.push(void 0)),o[s]=u}for(var l in t=this.regexEscape(t),o)o.hasOwnProperty(l)&&(t=t.replace(l,o[l]));return t="^"+t+"$",new RegExp(t)},regexEscape:function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},setRoutes:function(e){for(var t in this.routes=e,this.routes)this.routes.hasOwnProperty(t)&&(this.routes[t]=this.processRoute(this.routes[t]))},addRoute:function(e,t,n){this.routes[e]=t,void 0!==n&&(this.routes[e].action=n),this.routes[e]=this.processRoute(this.routes[e])},addRoutes:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.routes[t]=e[t],this.routes[t]=this.processRoute(this.routes[t]))},match:function(e){for(var t in""==(e=e.replace(/\/+$/,""))&&(e="/"),this.routes)if(this.routes.hasOwnProperty(t)){var n=e.match(this.routes[t].compiledRegex);if(n){for(var r={obj:Object.copy(this.routes[t].defaultSlugs.obj),arr:this.routes[t].defaultSlugs.arr.slice()},i=0;i<r.arr.length;i++)void 0!==n[i+1]&&(r.obj[this.routes[t].defaultSlugs.keys[i]]=n[i+1],r.arr[i]=n[i+1]);return{action:this.routes[t].action,slugs:r,defaults:Object.copy(this.routes[t].defaults)}}}return null}}),o=(n=D).BaseModule,i=o.extend({__propagationStopped:void 0,__defaultPrevented:void 0,__eventProps:void 0,data:void 0,name:void 0,constructor:function(e,t,n,r){for(var i in o.apply(this,arguments),this.__propagationStopped=!1,this.__defaultPrevented=!1,this.name=e||"UnsetEventName",this.data=n||{},t=t||{},this.__eventProps=t)t.hasOwnProperty(i)&&(this[i]=t[i]);r&&(this.originalEvent=r)},getEventProps:function(){return this.__eventProps},stopPropagation:function(){this.__propagationStopped=!0},isPropagationStopped:function(){return this.__propagationStopped},preventDefault:function(){void 0!==this.originalEvent?this.originalEvent.preventDefault():this.__defaultPrevented=!0},isDefaultPrevented:function(){return void 0!==this.originalEvent?this.originalEvent.defaultPrevented:this.__defaultPrevented}}),n.Event=i,s=(a=D).BaseModule,u=a.Event,l=s.extend({__moduleEvents:void 0,constructor:function(){this.__moduleEvents={},s.apply(this,arguments)},on:function(){var e,t,n,a=this,r=this.resolveArguments("on",arguments);e=r[0],t=r[1],n=r[2],e=""!=e?e.split(" "):[];for(var i=0;i<e.length;i++){var o=e[i].trim();this.__moduleEvents.hasOwnProperty(o)||(this.__moduleEvents[o]={name:o,fn:function(){},handlers:new Map,data:new Map},this.__moduleEvents[o].fn=function(i,o){return i.handlers.forEach(function(e,t){if(!o.isPropagationStopped()&&e){var n=i.data.get(t);n=n||{};var r=new u(t.name,o.getEventProps(),n);t.callback.bind(a)(r),r.isPropagationStopped()&&o.stopPropagation(),r.isDefaultPrevented()&&o.preventDefault()}}),o.isDefaultPrevented()}.bind(this,this.__moduleEvents[o]));var s={name:o,callback:n};this.__moduleEvents[o].handlers.set(s,!0),this.__moduleEvents[o].data.set(s,t)}},off:function(){var e,t,n,r=this.resolveArguments("off",arguments);e=r[0],t=r[1],n=r[2],e=""!=e?e.split(" "):[];for(var i=0;i<e.length;i++){var o,a=e[i],s=a,u=t;this.__moduleEvents[a].handlers.forEach(function(e,t){o||s!=t.name||u!=t.callback||(o=t)}),o&&(n?this.__moduleEvents[a].handlers.set(o,!1):(this.__moduleEvents[a].handlers.delete(o),this.__moduleEvents[a].data.delete(o)))}},trigger:function(e,t){return t instanceof u||(t=new u(e,t)),e in this.__moduleEvents&&this.__moduleEvents[e].fn(t)},hasHandlers:function(e){return!(!this.__moduleEvents.hasOwnProperty(e)||!this.__moduleEvents[e].handlers.size)},resolveArguments:function(e,arguments){var t,n,r,i,o=[].slice.call(arguments);if(t=o.shift(),"on"===e)switch(o.length){case 2:n=o[0],r=o[1];break;case 1:a.DT.isFunction(o[0])&&(r=o[0])}else{switch(o.length){case 2:i=o[0],r=o[1];break;case 1:a.DT.isFunction(o[0])&&(r=o[0])}a.DT.isFunction(o[0])&&(r=o[0])}return n=n||n,r=r||function(){},i=void 0!==i&&i,t=(t=t.trim())?t.replace(/(\s{2,})/," "):"","on"===e?[t,n,r]:[t,r,i]}}),a.EventModule=l,a.setRegisteredModule("Event",l),d=(c=D).EventModule,h=d.extend({dataSet:void 0,dataSetState:void 0,constructor:function(){d.apply(this,arguments);var e=arguments[0]||[];if(e.onChange&&this.on("change",e.onChange),e.data&&Array.isArray(e.data)){var t=e.clone||!1;this.dataSet=t?e.data.slice(0):e.data}else this.dataSet=[];this.dataSetState=new Array(this.dataSet.length).fill(!0),this.triggerChange("set")},getData:function(){var n=this;return this.dataSet.filter(function(e,t){return!!n.dataSetState[t]})},triggerChange:function(e){this.trigger("change",{caller:this,dataSet:this.getData(),type:e})},setData:function(e,t){return t=t||!1,this.dataSet=t?e.slice(0):e,this.dataSetState=new Array(this.dataSet.length).fill(!0),this},determineSort:function(e){return e=e.toLowerCase(),Array.isArray(e)?e:-1!==["desc",">"].indexOf(e)?"desc":"asc"},sort:function(e){for(var o=[],t=0;t<e.length;t++){var n=null,r=null;"string"==typeof e[t]?(n=e[t],r="asc"):Array.isArray(e[t])?(n=e[t][0],r=this.determineSort(e[t][1])):Object.isObject(e[t])&&(n=e[t].name,r=e[t].dir,r=this.determineSort(r)),n&&o.push({name:n,dir:r})}return this.dataSet.sort(function(e,t){for(var n=0;n<o.length;n++){var r=o[n];if(Array.isArray(r.dir)){var i=r.dir(e[r.name],t[r.name]);if(-1!==[-1,1].indexOf(i))return i}else{if(e[r.name]>t[r.name])return"asc"===r.dir?1:-1;if(e[r.name]<t[r.name])return"asc"===r.dir?-1:1}}return 0}),this.triggerChange("sort"),this},detemineFilterType:function(e){return e=e.toLowerCase(),1!==["equals","equal","="].indexOf(e)?"equals":1!==["!equals","!equal","!=","<>"].indexOf(e)?"not-equals":1!==["contains","contain","has"].indexOf(e)?"contains":1!==["!contains","!contain","!has"].indexOf(e)?"not-contains":1!==["<","less-than","lessthan","less"].indexOf(e)?"less-than":1!==[">","greater-than","greaterthan","greater"].indexOf(e)?"greater-than":1!==["starts-with","starts","^"].indexOf(e)?"starts-with":1!==["ends-with","ends","$"].indexOf(e)?"ends-with":1!==["regex"].indexOf(e)?"ends-with":1!==["function","func"].indexOf(e)?"ends-with":"equals"},detemineFilterGlue:function(e){return e=e.toLowerCase(),1!==["and","&"].indexOf(e)?"and":1!==["or","||","|"].indexOf(e)?"or":"and"},filter:function(e,t){t=t||!1;var u=this;u.reset();for(var l={and:[],or:[]},n=0;n<e.length;n++){var r=null,i=null,o=null,a=null;if(Array.isArray(e[n]))switch(e[n].length){case 4:r=e[n][0],i=e[n][1],o=this.determineFilterType(e[n][2]),a=this.detemineFilterGlue(e[n][3]);break;case 3:r=e[n][0],i=e[n][1],o=this.determineFilterType(e[n][2]),a="and";break;case 2:default:r=e[n][0],i=e[n][1],o="equals",a="and"}else Object.isObject(e[n])&&(r=e[n].name,i=e[n].value,o=e[n].type||"equals",a=e[n].glue||"and");r&&("or"==a?l.or.push({name:r,value:i,type:o,glue:a}):l.and.push({name:r,value:i,type:o,glue:a}))}var s=this.dataSet.filter(function(e,t){var n=!0;for(var r in l)if(l.hasOwnProperty(r))for(var i=0;i<l[r].length;i++){var o=l[r][i];switch(o.type){case"not-equals":e[o.name]==o.value&&(n=!1,"and"==r&&(i=l[r].length));break;case"contains":-1===e[o.name].indexOf(o.value)&&(n=!1,"and"==r&&(i=l[r].length));break;case"not-contains":-1!==e[o.name].indexOf(o.value)&&(n=!1,"and"==r&&(i=l[r].length));break;case"less-than":e[o.name]<o.value&&(n=!1,"and"==r&&(i=l[r].length));break;case"greater-than":e[o.name]>o.value&&(n=!1,"and"==r&&(i=l[r].length));break;case"starts-width":e[o.name].substring(0,o.value.length)!=o.value&&(n=!1,"and"==r&&(i=l[r].length));break;case"ends-with":e[o.name].substring(e[o.name]-o.value.length,e[o.name].length)!=o.value&&(n=!1,"and"==r&&(i=l[r].length));break;case"regex":var a=o.flags||"",s=new RegExp(o.value,a);e[o.name].match(s)||(n=!1,"and"==r&&(i=l[r].length));break;case"func":Array.isArray(o.value)&&!1!==o.value(e[o.name])||(n=!1,"and"==r&&(i=l[r].length));break;case"equals":default:e[o.name]!=o.value&&(n=!1,"and"==r&&(i=l[r].length))}}return n||(u.dataSetState[t]=!1),n});return this.triggerChange("filter"),t?s:this},reset:function(){return this.dataSetState=new Array(this.dataSet.length).fill(!0),this.triggerChange("reset"),this}},{sort:function(e,t){return new h({data:e,clone:!0}).sort(t).getData()},filter:function(e,t){return new h({data:e,clone:!0}).filter(t,!0)},filterSort:function(e,t,n){var r=new h({data:e,clone:!0});return r.setData(r.filter(t,!0)).sort(n).getData()}}),c.DatasetModule=h,c.setRegisteredModule("Dataset",h),h.extend({getFoo:function(){return"foo"}},{getFooStatic:function(){return"foo"}}),D.DT={isString:function(e){return"string"==typeof e||e instanceof String},isFinite:function(e){return"undefined"!=typeof isFinite?isFinite(e):"number"==typeof e},isNumber:function(e){return"number"==typeof e&&this.isFinite(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"function"==typeof e},isObject:function(e){return!1!==e&&("function"==typeof e||"object"==typeof e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isBool:function(e){return"boolean"==typeof e},isRegExp:function(e){return e&&"object"==typeof e&&e.constructor===RegExp},isError:function(e){return e instanceof Error&&void 0!==e.message},isDate:function(e){return e instanceof Date}},D.EventUtil={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}},f=(p=D).Event,m=p.EventUtil,p.EventManager=p.create({target:void 0,attached:void 0,init:function(e){this.target=e,this.attached={}},resolveArguments:function(e,arguments){var t,n,r,i,o=[].slice.call(arguments);if(t=o.shift(),"on"===e)switch(o.length){case 3:n=o[0],r=o[1],i=o[2];break;case 2:p.DT.isString(o[0])?n=o[0]:r=o[0],i=o[1];break;case 1:p.DT.isFunction(o[0])&&(i=o[0])}else switch(o.length){case 3:n=o[0],i=o[1],cache=o[2];break;case 2:p.DT.isString(o[0])?(n=o[0],i=o[1]):p.DT.isFunction(o[0])&&(i=o[0],cache=o[1]);break;case 1:p.DT.isFunction(o[0])&&(i=o[0])}return n=n||null,r=r||r,i=i||function(){},cache="undefined"!=typeof cache&&cache,t=(t=t.trim())?t.replace(/(\s{2,})/," "):"","on"===e?[t,n,r,i]:[t,n,i,cache]},on:function(){var e,t,n,r,s=this,i=this.resolveArguments("on",arguments);e=i[0],t=i[1],n=i[2],r=i[3],e=""!=e?e.split(" "):[];for(var o=0;o<e.length;o++){var u=e[o].trim();this.attached.hasOwnProperty(u)||(this.attached[u]={name:u,fn:function(){},handlers:new Map,data:new Map},this.attached[u].fn=function(o,e){var a=new f(u,{target:s.target},{},e);o.handlers.forEach(function(e,t){if(!a.isPropagationStopped()&&e){var n=o.data.get(t);n=n||{};var r,i=new f(u,{target:s.target},n,a.originalEvent);t.selector?i.originalEvent.target.matches(t.selector)?(t.callback.bind(i.originalEvent.target)(i),i.isPropagationStopped()&&a.stopPropagation()):(r=i.originalEvent.target.closest(t.selector))&&(t.callback.bind(r)(i),i.isPropagationStopped()&&a.stopPropagation()):(t.callback.bind(s.target)(i),i.isPropagationStopped()&&a.stopPropagation())}})}.bind(this.target,this.attached[u]),m.addHandler(this.target,u,this.attached[u].fn));var a={name:u,selector:t,callback:r};this.attached[u].handlers.set(a,!0),this.attached[u].data.set(a,n)}},off:function(){var e,t,n,r,i=this.resolveArguments("off",arguments);e=i[0],t=i[1],n=i[2],r=i[3],e=""!=e?e.split(" "):[];for(var o=0;o<e.length;o++){var a,s=e[o],u=s,l=t,c=n;this.attached[s].handlers.forEach(function(e,t){a||u!=t.name||l!=t.selector||c!=t.callback||(a=t)}),a&&(r?this.attached[s].handlers.set(a,!1):(this.attached[s].handlers.delete(a),this.attached[s].data.delete(a)))}},hasHandlers:function(e){return!(!this.attached.hasOwnProperty(e)||!this.attached[e].handlers.size)}}),function(a){var s=!1,u=!1;"complete"===document.readyState?s=!0:a.EventUtil.addHandler(window,"load",function(e){s=!0}),a.fn.documentReady(function(e){u=!0});var l=a.EventManager,c=a.Event,e=l.extend({isDocument:void 0,isWindow:void 0,init:function(){l.prototype.init.apply(this,arguments),this.isWindow=this.target===window,this.isDocument=this.target===document},on:function(){var e,t,n,r=this,i=this.resolveArguments("on",arguments);e=i[0],i[1],t=i[2],n=i[3];var o=" "+e+" ";this.isWindow&&s&&-1!==o.indexOf(" load ")&&(n(new c("load",{target:r.target},t)),e=(" "+e+" ").replace(" load ",""));this.isDocument&&u&&-1!==o.indexOf(" ready ")&&(n(new c("ready",{target:r.target},t)),e=(" "+e+" ").replace(" ready ",""));o=" "+e+" ";this.isDocument&&-1!==o.indexOf(" ready ")&&(a.fn.documentReady(function(e,t,n){t(new c("ready",{target:r.target},e,n))}.bind(r,t,n)),e=(" "+e+" ").replace(" ready ","")),i[0]=e,l.prototype.on.apply(this,i)}});a.DomEvents={window:new e(window),document:new e(document)}}(D),g=D,(v=function(){this.storage=new WeakMap}).prototype.set=function(e,t,n){this.storage.has(e)||this.storage.set(e,new Map),this.storage.get(e).set(t,n)},v.prototype.get=function(e,t){return this.has(e,t)?this.storage.get(e).get(t):void 0},v.prototype.has=function(e,t){return!!this.hasBase(e)&&this.storage.get(e).has(t)},v.prototype.hasBase=function(e){return this.storage.has(e)},v.prototype.remove=function(e,t){var n=!1;return this.has(e,t)&&(n=this.storage.get(e).delete(t)),this.hasBase(e)&&0===this.storage.get(e).size&&this.storage.delete(e),n},v.prototype.reset=function(e){this.hasBase(e)&&this.storage.delete(e)},g.ElementalData=v,b=(y=D).EventManager,E=new y.ElementalData,w=new WeakMap,(x={getAttributes:function(e){var t={};if(e=x.element(e))for(var n=0,r=e.attributes,i=r.length;n<i;n++)t[r[n].nodeName]=r[n].value;return t},text:function(e){return e?e.innerText||e.textContent:""},addClass:function(e,t){x.hasClass(e,t)||(""!=e.className&&(t=" "+t),e.className=e.className.trim()+" "+t.trim())},removeClass:function(e,t){if(x.hasClass(e,t)){t=" "+t+" ";var n=(" "+e.className+" ").replace(/[\n\t\r]/g," ");n=n.replace(t,""),e.className=n.trim()}},toggleClass:function(e,t){x.hasClass(e,t)?x.removeClass(e,t):x.addClass(e,t)},hasClass:function(e,t){return t=" "+t+" ",-1<(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(t)},css:function(e,t,n){if(void 0===n){var r,i=window.navigator.userAgent.toLowerCase();if(/msie|opera/.test(i)?r=e.currentStyle:/gecko/.test(i)&&(r=document.defaultView.getComputedStyle(e,null)),!y.DT.isObject(t))return null!=r[t]?r[t]:e.style[t];for(var o in t)t.hasOwnProperty(o)&&x.css(e,o,t[o])}else t&&(e.style[t]=n)},data:function(e,t,n){if(!(2<arguments.length))return x.data.get(e,t);x.data.set(e,t,n)}}).data.get=function(e,t){return E.get(e,t)},x.data.set=function(e,t,n){E.set(e,t,n)},x.data.has=function(e,t){return E.has(e,t)},x.data.remove=function(e,t){E.remove(e,t)},x.element=function(e){var t=x.elements(e);return t.length?t[0]:null},x.elements=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];y.DT.isString(n)?n=[n]:_&&n instanceof _||y.jLyte&&n instanceof y.jLyte?n=n.toArray():n instanceof NodeList?n=[].slice.call(n):n instanceof DocumentFragment?n=n.childNodes:y.DT.isArray(n)||(n=[n]);for(var r=0;r<n.length;r++)y.DT.isString(n[r])?e=e.concat(x.resolveElements(n[r])):_&&n[r]instanceof _||y.jLyte&&n[r]instanceof y.jLyte?e=e.concat(n[r].toArray()):y.DT.isArray(n[r])?e.concat(n[r]):e.push(n[r])}return e},x.resolveElements=function(e){if(!(e=e.trim())||""==e)return[];var t=[],n=e.match(/^(?:(<[\w\W]+>)|\#([\w-]+)|\.([\w-]+))$/);if(n)if(n[1])if(n=e.match(/^(<\s*(thead|tbody|tfoot|tr|td|th)[^>]*>)(.*)<\s*\/\s*(thead|tbody|tfoot|tr|td|th)\s*>$/))if(n[2]==n[4]){var r="table";"tr"==n[2]?r="thead":-1!==["td","th"].indexOf(n[2])&&(r="tr"),(r=document.createElement(r)).innerHTML=e,t=r.childNodes}else t=[document.createTextNode(e)];else t=document.createRange().createContextualFragment(e).childNodes;else if(n[2]){var i=document.getElementById(n[2]);t=i?[i]:[]}else t=document.querySelectorAll("."+n[3]);else t=(n=e.replace(/[\s,{]+$/gm,"").concat(" {").match(/([^\r\n,{}]+)(\s?,(?=[^}]*{)|\s*{)/))&&!e.match(/^(text\#|txt\#)/)?document.querySelectorAll(e.replace(/[\s,{]+$/gm,"")):(e=e.replace(/^(text\#|txt\#)/,""),[document.createTextNode(e)]);return[].slice.call(t)},x.offset=function(e){var t=e.getBoundingClientRect(),n=window.pageXOffset||document.documentElement.scrollLeft,r=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+r,left:t.left+n}},x.remove=function(e){if(e instanceof Element)e.parentElement.removeChild(e);else if(e instanceof NodeList||e instanceof HTMLCollection||y.DT.isArray(e))for(var t=e.length-1;0<=t;t--)e[t]&&e[t].parentElement&&e[t].parentElement.removeChild(e[t])},x.on=function(){var e=[].slice.call(arguments),t=e.shift();if(t){w.has(t)||w.set(t,new b(t));var n=w.get(t);b.prototype.on.apply(n,e)}},x.off=function(){var e=[].slice.call(arguments),t=e.shift();if(t&&w.has(t)){var n=w.get(t);b.prototype.off.apply(n,e)}},y.El=x,function(s){var u=!1,l=[];s.DomEvents.document.on("ready",function(){for(var e=0;e<l.length;e++)l[e]();l=[],u=!0});var c=function(e,t){if(s.DT.isFunction(e))u?e():l.push(e);else{if(!t)return new c(e,!0);s.DT.isArray(e)||s.DT.isString(e)||(e=[e]);for(var n=s.El.elements(e),r=0;r<n.length;r++)this[r]=n[r];this.length=n.length;for(r=0;r<this.length;r++)if(3!=this[r].nodeType){var i=s.El.getAttributes(this[r]);for(var o in i)if(i.hasOwnProperty(o)&&o.match(/^data-/)){var a=o.replace(/^data-/,"");a=s.fn.toCamelCase(a),s.El.data.set(this[r],a,i[o])}}}};c.prototype.each=function(e){for(var t=0;t<this.length;t++){e.bind(this[t])(t,this[t])}return this},c.prototype.toArray=function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},c.prototype.addClass=function(e){for(var t=0;t<this.length;t++)s.El.addClass(this[t],e);return this},c.prototype.removeClass=function(e){for(var t=0;t<this.length;t++)s.El.removeClass(this[t],e);return this},c.prototype.toggleClass=function(e){for(var t=0;t<this.length;t++)s.El.toggleClass(this[t],e);return this},c.prototype.hasClass=function(e){for(var t=!0,n=0;n<this.length;n++)s.El.hasClass(this[n],e)||(t=!1,n=this.length);return t},c.prototype.find=function(e){var t=[];return this.each(function(){t=t.concatUnique(Array.prototype.slice.call(this.querySelectorAll(e)))}),c(t)},c.prototype.parent=function(){var e=[];return this.each(function(){e=e.concatUnique([this.parentElement])}),c(e)},c.prototype.children=function(){var e=[];return this.each(function(){e=e.concatUnique(this.childNodes)}),c(e)},c.prototype.attr=function(e,t){return 1<arguments.length?(this.each(function(){this.setAttribute(e,t)}),this):(this.length&&(n=this[0].getAttribute(e)),n);var n},c.prototype.removeAttr=function(e){return this.each(function(){this.removeAttribute(e)}),this},c.prototype.data=function(e,t){return 1<arguments.length?(this.each(function(){s.El.data.set(this,e,t)}),this):(this.length&&(n=s.El.data.get(this[0],e)),n);var n},c.prototype.removeData=function(e){return this.each(function(){s.El.data.remove(this,key)}),this},c.prototype.closest=function(t){var n=[];return this.each(function(){var e=this.closest(t);e&&-1===n.indexOf(e)&&n.pushUnique(e)}),c(n)},c.prototype.remove=function(){return this.each(function(){s.El.data.remove(this),s.El.remove(this)}),this.length=0,this},c.prototype.css=function(e,t){if(1<arguments.length)return this.each(function(){s.El.css(this,e,t)}),this;if(s.DT.isObject(e)){for(var n in e)e.hasOwnProperty(n)&&this.css(n,e[n]);return this}var r=void 0;return this.length&&(r=s.El.css(this[0],e)),r},c.prototype.on=function(){var e=[].slice.call(arguments);e.unshift(null),this.each(function(){e[0]=this,s.El.on.apply(null,e)})},c.prototype.off=function(){var e=[].slice.call(arguments);e.unshift(null),this.each(function(){e[0]=this,s.El.off.apply(null,e)})},c.prototype.val=function(e){return void 0!==e?(this.each(function(){this.value=e}),this):(this.length&&(t=this[0].value),t);var t},c.prototype.append=function(){for(var e=0;e<arguments.length;e++){var r=arguments[e];this.each(function(){s.DT.isArray(r)||r instanceof NodeList||(r=r instanceof c?r.toArray():[r]);for(var e=0;e<r.length;e++)for(var t=s.El.elements(r[e]),n=0;n<t.length;n++)this!=t[n]&&this.appendChild(t[n])})}},c.prototype.prepend=function(){for(var e=[].slice.call(arguments).reverse(),t=0;t<e.length;t++){var r=e[t];s.DT.isArray(r)||r instanceof NodeList||(r=r instanceof c?r.toArray():[r]),r=r.reverse(),this.each(function(){for(var e=0;e<r.length;e++)for(var t=s.El.elements(r[e]),n=t.length-1;0<=n;n--)this.prepend(t[n])})}},c.prototype.appendTo=function(e){e=s.El.elements(e);for(var t=0;t<e.length;t++)this.each(function(){e[t].appendChild(this)})},c.prototype.prependTo=function(e){e=s.El.elements(e);for(var t=0;t<e.length;t++)this.each(function(){e[t].prepend(this)})},c.prototype.insertBefore=function(e){e=s.El.elements(e);for(var t=0;t<e.length;t++)this.each(function(){e[t].parentElement.insertBefore(this,e[t])})},c.prototype.insertAfter=function(t){t=s.El.elements(t);for(var n=0;n<t.length;n++)this.each(function(){var e=t[n].nextSibling;e?t[n].parentElement.insertBefore(this,e):t[n].parentElement.appendChild(this)})},c.prototype.html=function(n){return void 0!==n?(this.each(function(){if(s.DT.isObject(n)){this.innerHTML="";for(var e=s.El.elements(n),t=0;t<e.length;t++)this.appendChild(e[t])}else this.innerHTML=n}),this):(this.length&&(e=this[0].innerHTML),e);var e},c.prototype.outerHtml=function(){var e;return this.length&&(e=this[0].outerHtml),e},c.prototype.text=function(e){return void 0!==e?(this.each(function(){this.innerHTML=s.fn.htmlEntities(e)}),this):(this.length&&(t=(t=s.El.text(this[0])).replace(/\r\n|\n/g," ").replace(/ +(?= )/g,"")),t);var t},c.prototype.val=function(r){return void 0!==r?(r=s.DT.isArray(r)?r:[r],this.each(function(){var e=jLyte(this),t=this.tagName.toLowerCase();if("select"===t)r=this.multiple&&r.length?[r.pop()]:r,e.find("option").each(function(){this.selected="false",this.value&&-1!==r.indexOf(this.value)&&(this.selected="true")});else if("input"===t){var n=this.type;-1!==["checkbox","radio"].indexOf(n)?(this.checked=!1,this.value&&-1!==r.indexOf(this.value)&&(this.checked=!0)):this.value=r[0]}else this.value=r[0]}),this):(this.length&&(e=this[0].value),e);var e},c.each=function(e,n){if(e instanceof c)e.each(function(e,t){n(e,jLyte(t))});else if(s.DT.isObject(e)){var t=-1;for(var r in e)e.hasOwnProperty(r)&&(t++,n(r,e[r],t))}else for(var i=0;i<e.length;i++)n(i,e[i])},s.jLyte=c}(D),D.JSCookie=function(){function s(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function l(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function e(u){function a(){}function n(e,t,n){if("undefined"!=typeof document){"number"==typeof(n=s({path:"/"},a.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var r=JSON.stringify(t);/^[\{\[]/.test(r)&&(t=r)}catch(e){}t=u.write?u.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i="";for(var o in n)n[o]&&(i+="; "+o,!0!==n[o]&&(i+="="+n[o].split(";")[0]));return document.cookie=e+"="+t+i}}function t(e,t){if("undefined"!=typeof document){for(var n={},r=document.cookie?document.cookie.split("; "):[],i=0;i<r.length;i++){var o=r[i].split("="),a=o.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var s=l(o[0]);if(a=(u.read||u)(a,s)||l(a),t)try{a=JSON.parse(a)}catch(e){}if(n[s]=a,e===s)break}catch(e){}}return e?n[e]:n}}return a.set=n,a.get=function(e){return t(e,!1)},a.getJSON=function(e){return t(e,!0)},a.remove=function(e,t){n(e,"",s(t,{expires:-1}))},a.defaults={},a.withConverter=e,a}(function(){})}(),D.TagLoader={getJson:function(e){return JSON.safeParse(this.getText(e))},setJson:function(e,t,n){this.setText(e,JSON.stringify(t),n)},getText:function(e){var t=null;return void 0!==_&&e instanceof _?t=e.text()||e.html():isObject(e)?t=e.innerHTML:null!==(e=document.getElementById(e.replace(/^#/,"")))&&(t=e.innerText),this.removeWrap(t)},setText:function(e,t,n){if(t=this.applyWrap(t),void 0!==_&&e instanceof _)e.html(t);else if(isObject(e))e.innerHTML=t;else{var r=e;if(null!==(e=document.getElementById(e.replace(/^#/,""))))e.innerHTML=t;else{var i=document.createElement("script");i.type="application/json",i.id=r.replace(/^#/,""),i.innerHTML=t,(n=n||document.body).appendChild(i)}}},applyWrap:function(e){return"\x3c!--"+e.trim()+"--\x3e"},removeWrap:function(e){return"string"==typeof e?e.trim().replace(/(\r\n|\n|\r)/gm," ").replace(/\t+/gm," ").replace(/^<\!\-\-(.+)\-\->$/,"$1"):null}},A=(O=D).TagLoader,O.Storage=function(){var e={},o=function(){return Math.floor((new Date).getTime()/1e3)},t=function(e){this.storage=e};t.prototype={supported:function(){return!!this.storage},set:function(e,t,n){this.supported()&&(t=JSON.stringify(t),this.storage.setItem(e,t),n&&this.storage.setItem(e+"_exp",o()+n))},get:function(e){return this.supported()?this.storage.getItem(e+"_exp")&&o()>=parseInt(this.storage.getItem(e+"_exp"))?(this.storage.getItem(e)&&this.storage.removeItem(e),this.storage.removeItem(e+"_exp"),null):JSON.parse(this.storage.getItem(e)):null},remove:function(e){this.supported()&&(this.storage.removeItem(e),this.storage.removeItem(e+"_exp"))},clear:function(){this.supported()&&this.storage.clear()},length:function(){if(this.supported()){var e=0;for(var t in localStorage)t.endsWith("_exp")||e++;return e}return 0},totalLength:function(){if(this.supported()){var e=0;for(var t in localStorage)e++;return e}return 0}};var n=function(){this.instanceClass=this.itemClass+"_"+O.fn.rand(),this.itemIndex={}};return n.prototype={itemClass:"appStorageItem",parent:void 0,supported:function(){return!(void 0===A||!A)},set:function(e,t,n){if(this.supported()){if(this.itemIndex[e]||(this.itemIndex[e]="#"+this.itemClass+"_"+O.fn.rand()),!this.parent){var r=document.createElement("div");r.id=this.instanceClass,r.style.display="none",this.parent=r,document.body.appendChild(r)}A.setJson(this.itemIndex[e],t,this.parent);var i=document.getElementById(this.itemIndex[e].replace(/^#/,""));O.El.addClass(i,this.itemClass),O.El.addClass(i,this.instanceClass),n&&i.setAttribute("data-exp",o()+n)}},get:function(e){if(this.supported()&&this.itemIndex[e]){var t=document.getElementById(this.itemIndex[e].replace(/^#/,""));return t?t.getAttribute("data-exp")&&o()>=parseInt(t.getAttribute("data-exp"))?(O.El.remove(t),delete this.itemIndex[e],null):A.getJson(t):null}},remove:function(e){if(this.supported()&&this.itemIndex[e]){var t=document.getElementById(this.itemIndex[e].replace(/^#/,""));t&&(O.El.remove(t),delete this.itemIndex[e])}},clear:function(){if(this.supported()){var e=document.getElementsByClassName(this.instanceClass);0<e.length&&(O.El.remove(e),this.itemIndex={})}},length:function(){return this.supported()?document.getElementsByClassName(this.instanceClass).length:0},totalLength:function(){return this.supported()?document.getElementsByClassName(this.itemClass).length:0}},e.local=new t(window.localStorage),e.session=new t(window.sessionStorage),e.page=new n,e},D.Timeout=function(e){void 0===e&&(e={});var t=e.time||1800,n=e.callback||function(){alert("Session Expired"),location.reload()},r=0,i=e.autostart||!0,o=function(){r=0},a=function(){i&&t<=++r&&(i=!1,n())};return void 0!==e.manualHandlers&&e.manualHandlers||(document.onclick=o,document.onmousemove=o,document.onkeypress=o),window.setInterval(a,1e3),{expTime:t,isRunning:function(){return i},restart:function(){i=!(r=0)},stop:function(){r=0,i=!1},counter:{get:function(){return r},reset:o},check:a,triggerCallback:function(){n()}}},D.UrlParser={regexes:{scheme:/^([a-zA-Z0-9]+):\/\/|^\/\//,username_password:/^([a-zA-Z0-9_-]+)?:([a-zA-Z0-9_-]+)?@/,host:/^((?:(?:[a-zA-Z0-9_-]+)\.)+(?:[a-zA-Z0-9_-]+){1})/,port:/^(?::([0-9]+))/,path:/^((?!\/\/)(?:\/|\.\/|\.\.\/)(?:[^?#]+)?)/,query:/^(?:\?([^#]+)*)/,fragment:/^(?:#(.+)*)/},parse:function(e,t){t=void 0!==t?t:"";var n=e,r=this.urlParts(),i={};for(var o in r.url=e,this.regexes)if(this.regexes.hasOwnProperty(o)){var a=n.match(this.regexes[o]);if(i[o]=!1,a){i[o]=!0;var s=o.split("_");n=n.substring(a[0].length,n.length);for(var u=0;u<s.length;u++)void 0!==a[u+1]&&(r[s[u]]=a[u+1])}}var l=!1;for(var o in r)r.hasOwnProperty(o)&&""!=r[o]&&(l=!0);if(""==r.host&&i.scheme?l=!1:""==r.host?""==r.path?l=!1:(""!=r.scheme||""!=r.username||""!=r.password||r.host||r.port)&&(l=!1):""==r.path&&(r.path=t),l){if(""!=r.host){var c=r.host.split(".");2<c.length?(r.domain=c[c.length-2]+"."+c[c.length-1],c.pop(),c.pop(),r.subdomain=c.join(".")):r.domain=r.host}var d=r.path.replace(/^\/+|\/+$/g,"");if(""!=d?r.pathParts=d.split("/"):""!=r.path&&(r.pathParts=["/"]),r.queryString=r.path+(""!=r.query?"?"+r.query:""),""!=r.query){var h=r.query.split("&");for(u=0;u<h.length;u++){var p=h[u].split("=");p.length<2&&p.push(""),r.queryVariables[p[0]]=decodeURIComponent(p[1])}}return r}return null},build:function(e){var t=this.cloneObject(e);return void 0===t.scheme&&(t.scheme=""),void 0===t.username&&(t.username=""),void 0===t.password&&(t.password=""),void 0===t.subdomain&&(t.subdomain=""),void 0===t.domain&&(t.domain=""),void 0===t.host&&(t.host=""),void 0===t.port&&(t.port=""),void 0===t.path&&(t.path=""),void 0===t.query&&(t.query=""),void 0===t.fragment&&(t.fragment=""),""!=t.scheme&&(t.scheme=t.scheme+"://"),""==t.host&&(""!=t.subdomain&&""!=t.domain?t.host=t.subdomain+"."+t.domain:""!=t.domain&&(t.host=t.domain)),(t.auth="")==t.username&&""==t.password||(t.auth=t.username+":"+t.password+"@"),""!=t.port&&(t.port=":"+t.pprt),""!=t.query&&(t.query="?"+t.query),""!=t.fragment&&(t.fragment="#"+t.fragment),t.path.match(/^\./)&&""!=t.host&&(t.path="/"+t.path),t.host?t.scheme+t.auth+t.host+t.port+t.path+t.query+t.fragment:(""==t.path&&(t.path="/"),t.path+t.query+t.fragment)},urlParts:function(){return{url:"",scheme:"",username:"",password:"",subdomain:"",domain:"",host:"",port:"",path:"",query:"",fragment:"",queryString:"",pathParts:[],queryVariables:{}}},cloneObject:function(e){if(null==e||"object"!=typeof e)return e;var t=e.constructor();for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},D.UserAutoExpire=D.create({el:void 0,modelId:void 0,modelTimer:void 0,keepAliveTimer:void 0,exp:void 0,warningDuration:void 0,warningTimeout:void 0,expireUrl:void 0,renewUrl:void 0,init:function(e){var t=this;e=e||{},e=Object.deepCopyMerge({exp:1800,warningDuration:60,expireUrl:"/logout",renewUrl:"/api/keep-session-alive"},e),t.exp=e.exp,t.warningDuration=e.warningDuration,t.expireUrl=e.expireUrl,t.renewUrl=e.renewUrl,t.el={model:void 0,timer:void 0},t.modelId="userAutoExpire"+D.fn.rand(),t.el.model=t.attachModel(t.modelId),t.el.timer=t.el.model.querySelector("#"+t.modelId+"_timer"),D.EventUtil.addHandler(t.el.model.querySelector(".userAutoExpire_End"),"click",function(){t.endSession()}),D.EventUtil.addHandler(t.el.model.querySelector(".userAutoExpire_Keep"),"click",function(){t.continueSession()}),t.warningTimeout=new D.Timeout({time:t.exp-t.warningDuration,callback:function(){t.promtUser()}}),t.keepAliveTimer=setInterval(function(){t.keepAliveHandler()},1e3*parseInt(t.exp/3))},promtUser:function(){var e=this;this.el.timer.innerHTML=this.warningDuration+"s",this.revealModel(),this.modelTimer=setInterval(function(){e.countdownTimer()},1e3)},countdownTimer:function(){var e=parseInt(this.el.timer.innerHTML.replace("s",""));0<e?this.el.timer.innerHTML=e-1+"s":this.endSession()},endSession:function(){this.hideModel(),clearInterval(this.modelTimer),window.location=this.expireUrl},continueSession:function(){this.hideModel(),this.el.timer.innerHTML="--",clearInterval(this.modelTimer),this.modelTimer=null,this.warningTimeout.restart()},keepAliveHandler:function(){D.fn.request(this.renewUrl)},hideModel:function(){D.El.removeClass(this.el.model,"opened"),D.El.addClass(this.el.model,"closed")},revealModel:function(){D.El.removeClass(this.el.model,"closed"),D.El.addClass(this.el.model,"opened")},attachModel:function(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=".userAutoExpire_container {position: fixed;top: 0;left: 0;right: 0;bottom: 0;background-color: rgba(0, 0, 0, 0.20);z-index: 10000;}.userAutoExpire_container.closed {display: none;}.userAutoExpire_container p {margin: 0;margin-bottom: 2rem;}.userAutoExpire_container p:last-child {margin: 0;}.userAutoExpire_wrap {height: 100%;}.userAutoExpire {width: 300px;background: #e9e9e9;position: relative;top: 50%;transform: translateY(-50%);margin: 0 auto;padding: 1rem;box-shadow:0 4px 5px 0 rgba(0,0,0,0.14),0 1px 10px 0 rgba(0,0,0,0.12),0 2px 4px -1px rgba(0,0,0,0.3);}.userAutoExpire_button {-webkit-appearance: none;-moz-appearance: none;line-height: 1;display: inline-block;text-align: center;cursor: pointer;transition: background-color 0.25s ease-out, color 0.25s ease-out;vertical-align: middle;border: 1px solid #222;border-radius: 0;padding: 0.8em 1em 0.7695em 1em;margin: 0;font-size: 0.9rem;background-color: #e9e9e9;color: #222;}.userAutoExpire_End {border-color: transparent;}.userAutoExpire_button:hover, .userAutoExpire_button:focus {text-decoration: underline;}.userAutoExpire_Keep:hover, .userAutoExpire_Keep:focus {color: #e9e9e9;background-color: #222;text-decoration: none;}.userAutoExpire_links {text-align: right;}",document.querySelector("head").appendChild(t);var n=document.querySelector("body"),r=D.El.element('<div id="'+e+'_container" class="userAutoExpire_container closed" style="">\t<div id="'+e+'_wrap" class="userAutoExpire_wrap">\t\t<div id="'+e+'" class="userAutoExpire">\t\t\t<div id="'+e+'_content" class="userAutoExpire_content">\t\t\t\t<p class="userAutoExpire_message">Session will expire in:&nbsp;<span id="'+e+'_timer" class="userAutoExpire_timer">--</span></p>\t\t\t\t<p class="userAutoExpire_links"><button class="userAutoExpire_button userAutoExpire_End">End Now</button>&nbsp;&nbsp;<button class="userAutoExpire_button userAutoExpire_Keep">Keep Alive</button></p>\t\t\t</div>\t\t</div>\t</div></div>');return n.appendChild(r),r}}),S=D,j={hasAsked:void 0,hasGranted:void 0,hasDenied:void 0},(C={supported:function(){return"Notification"in window},hasAsked:function(){return j.hasAsked},hasGranted:function(){return j.hasGranted},hasDenied:function(){return j.hasDenied},notify:function(n,r){var i=(r=r||{}).autoClose||!1,o=r.autoCloseTime||5e3;if(delete r.autoClose,delete r.autoCloseTime,j.hasGranted){var e=new Notification(n,r);i&&setTimeout(e.close.bind(e),o)}else j.hasAsked||C.request(function(e){if(e){var t=new Notification(n,r);i&&setTimeout(t.close.bind(t),o)}})},request:function(t){t=t||function(){},Notification.requestPermission(function(e){j.hasAsked=!0,"granted"==e?(j.hasGranted=!0,t(!0)):(j.hasDenied=!0,t(!1))})}}).supported()&&(j.hasGranted="granted"===Notification.permission,j.hasDenied="denied"===Notification.permission,j.hasAsked="denied"!==Notification.permission&&"granted"!==Notification.permission),S.Webify=C,D});