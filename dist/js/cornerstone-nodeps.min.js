!function(t,e){var i="undefined"!==t.Cornerstone_NoConflict&&t.Cornerstone_NoConflict;"function"==typeof define&&define.amd?define(["bglib"],e):"object"==typeof module&&module.exports?module.exports=e(require("bglib")):(t.Cornerstone=e(t.bglib),i||(t.CS=t.Cornerstone))}(global="undefined"!=typeof self?self:this,function(t){"undefined"!==global.Sortable&&global.Sortable,"undefined"!==global.jQuery&&global.jQuery;"undefined"==typeof bglib&&(bglib=t);var n={name:"Cornerstone UI",version:"1.0",__onLoadHandlers:[],__hasLoaded:!1},o=function(){};o.getName=function(){return _this.name},o.getVersion=function(){return _this.version},o.setInstance=function(t,e,i){bglib.El.data(t,"CS_"+e,i)},o.getInstance=function(t,e){return bglib.El.data(t,"CS_"+e)},o.init=function(){var t=document.querySelector("html");for(var e in bglib.El.removeClass(t,"cs-nojs"),bglib.El.addClass(t,"cs-js"),o.autoload)o.autoload.hasOwnProperty(e)&&o.autoload[e]();n.__hasLoaded=!0;for(var i=0;i<n.__onLoadHandlers.length;i++)n.__onLoadHandlers[i]();console.log("Cornerstone:inited")},o.onLoad=function(t){n.__hasLoaded||bglib.DT.isFunction(t)&&n.__onLoadHandlers.push(t)},o.fn={},(o.autoload={}).factory=function(l,r,d,c){return c=c||[],function(){for(var t=document.querySelectorAll(r),e=0;e<t.length;e++){var i=t[e].getAttribute(d);i=i&&""!=i.trim()?JSON.safeParse(i.trim()):{};for(var n=0;n<c.length;n++){var o=c[n],s=bglib.fn.toCamelCase(o),a=t[e].getAttribute("data-"+o);t[e].removeAttribute("data-"+o),void 0!==a&&(l.handleDataAttr?(a=l.handleDataAttr(o,a,i),bglib.DT.isObject(a)?i=Object.deepMerge(i,a):a&&(i[s]=a)):a&&(i[s]=a))}new l(t[e],i)}}},bglib.fn.documentReady(function(){o.init()});var i=bglib.EventModule,e=i.extend({Name:void 0,instanceId:void 0,$el:void 0,defaultOptions:void 0,options:void 0,constructor:function(t,e){this.$el=bglib.jLyte(t),t=this.$el[0],this.defaultOptions={},this.options=e||{},bglib.DT.isObject(e)||(this.options={}),this.instanceId=bglib.fn.rand(),o.setInstance(t,this.Name,this),this.$el.attr("data-cs-instance",this.Name),this.$el.removeAttr("data-"+this.Name.lowercaseFirst(),this.Name),i.apply(this,arguments)},getOption:function(t){return this.options.hasOwnProperty(t)?this.options[t]:this.defaultOptions.hasOwnProperty(t)?this.defaultOptions[t]:null},setOption:function(t,e){this.options[t]=e}});o.BaseComponent=e;var s,a,l,r,d,c,h,p,f,u,g,m,v,b,w,$,C,y,x,O,P,I,E,T,_,k,j=i.extend({Name:void 0,defaultOptions:void 0,options:void 0,constructor:function(t,e){this.defaultOptions={},this.options=e||{},bglib.DT.isObject(e)||(this.options={}),i.apply(this,arguments)},getOption:function(t){return this.options.hasOwnProperty(t)?this.options[t]:this.defaultOptions.hasOwnProperty(t)?this.defaultOptions[t]:null},setOption:function(t,e){this.options[t]=e}});return o.BaseModule=j,s=o,a=bglib.DomEvents,l=bglib.jLyte,r=s.BaseModule.extend({Name:"Accordion",__breakpoints:void 0,init:function(){var n=this;this.defaultOptions={breakpoints:{sm:"40em",md:"64em",lg:"90em",xlg:"120em"}},this.__breakpoints=this.getOption("breakpoints"),a.document.on("ready",function(){var t=l('<div class="cornerstone-bp"></div>');t.css({position:"fixed",top:"-999px",left:"-999px",width:"0",height:"0"}),t.appendTo("body");var e=t.css("content"),i=e?e.match(/sm:(\w+);md:(\w+);lg:(\w+);xlg:(\w+)/):null;t.remove(),i&&(n.__breakpoints={sm:i[1],md:i[2],lg:i[3],xlg:i[4]})}),a.window.on("resize",function(){})},handleResize:function(t){},handleBreakpointChange:function(t){}},{}),s.Breakpoint=new r,d=o,c=bglib.jLyte,h=d.BaseComponent.extend({Name:"Accordion",init:function(){var i=this;this.defaultOptions={childSelector:".accordion-item",multipleOpen:!1,allClosed:!0},this.$el.addClass("cs-accordion-"+this.instanceId);var t=this.getChildren();return t.each(function(){var t=c(this),e=t.find(".content-wrap");e.length||((e=c('<div class="content-wrap"></div>')).append(t.find(".accordion-content").children()),t.find(".accordion-content").append(e))}),t.each(function(){var t=c(this);i.setHeight(t),t.hasClass("pre-opened")&&(t.removeClass("pre-opened"),i.openItem(t))}),this.$el.on("click",".accordion-item .accordion-title",function(t){var e=c(this);e.hasClass("accordion-item")||(e=e.closest(".accordion-item")),i.toggleItem(e),t.preventDefault()}),bglib.DomEvents.window.on("resize",function(){i.getChildren().each(function(){var t=c(this);t.hasClass("opened-item")&&i.setHeight(t)})}),this},getChildren:function(t){return this.$el.find(this.getOption("childSelector"))},closeAll:function(e){var i=this;!e||e instanceof c||(e=c(e)),this.getChildren().each(function(){var t=c(this);this!=e[0]&&t.hasClass("opened-item")&&i.closeItem(t)})},setHeight:function(t){var e=t.find(".accordion-content");e.css("height",e.find(".content-wrap").css("height"))},toggleItem:function(e){if(e instanceof c||(e=c(e)),e.hasClass("opened-item"))if(this.getOption("allClosed"))this.closeItem(e);else{var i=!1;this.getChildren().each(function(){var t=c(this);!i&&this!=e[0]&&t.hasClass("opened-item")&&(i=!0)}),i&&this.closeItem(e)}else this.getOption("multipleOpen")||this.closeAll(e),this.openItem(e)},openItem:function(t){t instanceof c||(t=c(t)),this.trigger("beforeOpen",{item:t})||(this.setHeight(t),t.addClass("opened-item"),this.trigger("opened",{item:t}))},closeItem:function(t){t instanceof c||(t=c(t)),this.trigger("beforeClose",{item:t})||(t.removeClass("opened-item"),this.trigger("closed",{item:t}))}},{}),d.Accordion=h,d.autoload.Accordion=d.autoload.factory(h,"[data-accordion]","data-accordion"),p=o,(f=bglib.jLyte)(function(){f("body").on("click",".cs-close",function(n){var t=f(this),e=t.attr("data-close-target")||null;(e=e?f(e):t.closest("[data-cs-instance]")).each(function(){var t=f(this),e=t.attr("data-cs-instance"),i=null;e&&""!=e.trim()&&(i=p.getInstance(t[0],e))&&i.handleCloseAction&&(i.handleCloseAction(),n.preventDefault())})})}),u=o,g=bglib.jLyte,m=u.BaseComponent.extend({Name:"Modal",scrollPreventor:void 0,pageOffset:void 0,init:function(){var t,e=this;this.scrollPreventor=function(t){e.isParentBody&&global.scrollTo(e.pageOffset.x,e.pageOffset.y),t.preventDefault(),t.stopPropagation()},this.defaultOptions={parent:"window"},this.$el.addClass("cs-modal-"+this.instanceId);var i=!1;"window"==this.getOption("parent")?(t=g(document.querySelector("body")),i=!0):t=g(this.getOption("parent")),this.id=this.$el.attr("id")?this.$el.attr("id")+"-wrap":"cs-modal-wrap-"+bglib.fn.rand();var n=g('<div class="cs-modal-wrap"></div>');n.attr("id",this.id),n.appendTo(t),n.append(this.$el),n.attr("data-parent",i?"window":"element"),n.attr("data-state","closed"),this.$el.find(".modal-header").length||this.$el.prepend('<div class="modal-header"></div>'),this.$el.find(".modal-content").length||g('<div class="modal-content"></div>').insertAfter(this.$el.find(".modal-header")),this.$el.find(".modal-footer").length||g('<div class="modal-footer"></div>').insertAfter(this.$el.find(".modal-content")),this.$wrap=n;var o=this.$el.hasClass("modal-fixed-header"),s=this.$el.hasClass("modal-fixed-footer"),a=this.$el.hasClass("modal-fill");if(o&&s){this.$wrap.addClass("modal-fixed-header"),this.$wrap.addClass("modal-fixed-footer");var l=g('<div class="modal-fixed-wrap"></div>'),r=this.$el.find(".modal-content");r.length?l.insertBefore(r):l.prependTo(r),l.append(this.$el.find(".modal-content"))}else if(o){this.$wrap.addClass("modal-fixed-header"),(l=g('<div class="modal-fixed-wrap"></div>')).appendTo(this.$el),l.append(this.$el.find(".modal-content")),l.append(this.$el.find(".modal-footer"))}else if(s){this.$wrap.addClass("modal-fixed-footer"),(l=g('<div class="modal-fixed-wrap"></div>')).prependTo(this.$el),l.append(this.$el.find(".modal-header")),l.append(this.$el.find(".modal-content"))}return a&&this.$wrap.addClass("modal-fill"),this.$el.attr("tabindex","0"),bglib.DomEvents.window.on("keyup",function(t){"Escape"==t.originalEvent.key&&e.isOpen()&&e.isFocused()&&e.close()}),n.on("click",function(t){g(t.originalEvent.target).hasClass("cs-modal-wrap")&&e.isOpen()&&e.close()}),this.isParentBody=i,this},isFocused:function(){var t=document.activeElement;if(t){var e=g(t);if(e.hasClass(".cs-modal"))return!0;var i=e.closest(".cs-modal");if(i.length&&this.$el[0]===i[0])return!0}return!1},isOpen:function(){return"opened"==this.$wrap.attr("data-state")},open:function(){this.trigger("beforeOpen",{model:this.$el})||(this.$wrap.attr("data-state","opened"),this.$el[0].focus(),this.isParentBody&&(this.pageOffset={x:global.pageXOffset,y:global.pageYOffset},bglib.EventUtil.addHandler(window,"scroll",this.scrollPreventor),g(document.querySelector("body")).addClass("cs-modal-open")),this.trigger("opened",{model:this.$el}))},close:function(){this.trigger("beforeClose",{model:this.$el})||(this.$wrap.attr("data-state","closed"),this.isParentBody&&(bglib.EventUtil.removeHandler(window,"scroll",this.scrollPreventor),g(document.querySelector("body")).removeClass("cs-modal-open")),this.trigger("closed",{model:this.$el}))},getHeader:function(){return this.$el.find(".modal-header")[0]},setHeader:function(t){t=t||"",this.$el.find(".modal-header").html(t)},getContent:function(){return this.$el.find(".modal-content")[0]},setContent:function(t){t=t||"",this.$el.find(".modal-content").html(t)},getFooter:function(){return this.$el.find(".modal-footer")[0]},setFooter:function(t){t=t||"",this.$el.find(".modal-footer").html(t)},getScrollObject:function(){return this.$el.find(".modal-fixed-wrap").length?this.$el.find(".modal-fixed-wrap")[0]:this.$wrap[0]},scrollToTop:function(){this.getScrollObject().scrollTop=0},scrollToBottom:function(){var t=this.getScrollObject();t.scrollTop=t.scrollHeight},scrollTo:function(t){var e=this.getScrollObject();(t=t?parseInt(t,10):0)<0?t=0:t>e.scrollHeight&&(t=e.scrollHeight),e.scrollTop=t},handleCloseAction:function(){this.isOpen()&&this.close()}},{}),u.Modal=m,u.autoload.Modal=u.autoload.factory(m,"[data-modal]","data-modal"),g(function(){g("button[data-modal-target]").each(function(){var i=g(this);i.on("click",function(){var t=g(i.attr("data-modal-target"));if(t.length){var e=u.getInstance(t[0],"Modal");e&&e.open()}})})}),v=o,b=bglib.jLyte,w=bglib.DomEvents,$=v.BaseComponent.extend({Name:"Dropdown",$action:void 0,$content:void 0,init:function(){var o=this;this.$el.addClass("cs-dropdown-"+this.instanceId),this.defaultOptions={action:"click",anchor:"bottom-left"},this.$action=this.$el.find(".dropdown-action"),this.$content=this.$el.find(".dropdown-content");var t=this.$action.css("margin-bottom");return this.$action.css("margin-bottom",0),this.$el.attr("data-anchor")?this.setOption("anchor",this.$el.attr("data-anchor")):this.$el.attr("data-anchor",this.getOption("anchor")),t&&this.$el.css("margin-bottom",t),"hover"==this.getOption("action")||this.$el.hasClass("dropdown-hover")?(this.$action.on("mouseover",function(t){o.isOpen()||o.open()}),this.$el.on("mouseleave",bglib.fn.debounce(function(t){o.isOpen()&&o.close()},10))):(this.$action.on("click",function(t){o.isOpen()?o.close():o.open()}),w.window.on("click",function(t){var e=b(t.originalEvent.target),i=(t.originalEvent.target,!1),n="cs-dropdown-"+o.instanceId;e.hasClass(n)||(i=0==e.closest("."+n).length),o.isOpen()&&i&&o.close()})),bglib.DomEvents.window.on("resize",bglib.fn.debounce(function(){o.isOpen()&&o.updateHeight()},50)),this.$el.attr("data-state","closed"),this},isOpen:function(){return"opened"==this.$el.attr("data-state")},open:function(){this.determinePosition();this.trigger("beforeOpen",{dropdown:this.$el})||(this.updateHeight(),this.$el.attr("data-state","opened"),this.trigger("opened",{dropdown:this.$el}))},close:function(){this.trigger("beforeClose",{dropdown:this.$el})||(this.$el.attr("data-state","closed"),this.trigger("close",{dropdown:this.$el}))},updateHeight:function(){this.$content.css("height",this.$content.find(".dropdown-content-wrap").css("height"))},determinePosition:function(){this.getOption("anchor"),this.$el[0].getBoundingClientRect()},handleCloseAction:function(){this.isOpen()&&this.close()}},{}),v.Dropdown=$,v.autoload.Dropdown=v.autoload.factory($,"[data-dropdown]","data-dropdown"),C=o,y=bglib.jLyte,x=bglib.DomEvents,O=C.BaseComponent.extend({Name:"PriorityPlus",dropdown:void 0,init:function(){var t=this;this.defaultOptions={action:"click",anchor:"bottom-left"},this.$el.addClass("cs-priority-plus-"+this.instanceId);var e=y('\t\t\t\t<li class="item overflow-toggle-item cs-dropdown">\t\t\t\t\t<button class="cs-button dropdown-action button-primary"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="512px" height="512px" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><g id="Icon_7_"><g><path d="M416,277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416V277.333z"/></g></g></svg></button>\t\t\t\t\t<div class="dropdown-content"><ul class="dropdown-content-wrap"></ul></div>\t\t\t\t</li>\t\t\t');return e.appendTo(this.$el.find(".priority-plus-items")),this.dropdown=new C.Dropdown(e[0],{anchor:"bottom-right"}),t.handleResize(),x.window.on("resize",bglib.fn.debounce(function(){t.handleResize()},1)),this},handleResize:function(){this.resetItems();for(var t=this.$el.find(".priority-plus-items")[0].getBoundingClientRect(),e=this.dropdown.$el[0].getBoundingClientRect(),i=t.width-e.width,n=this.getItems(),o=!1,s=0;s<n.length;s++){var a=y(n[s]),l=a[0].getBoundingClientRect();(i<l.x-t.x+l.width||o)&&(this.dropdown.$el.find(".dropdown-content-wrap").append(a),o||(o=!0))}this.toggleAction(),this.trigger("reflow",{priorityPlus:this.$el,items:this.getItems(),overflow:this.dropdown.$el.find(".dropdown-content-wrap > .item")})},toggleAction:function(){this.dropdown.$el.find(".dropdown-content-wrap").find(".item").length?this.dropdown.$el.css("visibility","visible"):this.dropdown.$el.css("visibility","hidden")},resetItems:function(){var t=this.$el.find(".priority-plus-items");this.dropdown.$el.find(".dropdown-content-wrap").find(".item").each(function(){t.append(this)}),this.dropdown.$el.css("visibility","hidden"),this.trigger("reset",{priorityPlus:this.$el,items:this.getItems()})},getItems:function(){return this.$el.find(".priority-plus-items > .item:not(.overflow-toggle-item)")}},{}),C.PriorityPlus=O,C.autoload.PriorityPlus=C.autoload.factory(O,"[data-priority-plus]","data-priority-plus"),P=o,I=bglib.jLyte,E=P.BaseComponent.extend({Name:"Pagination",$ellipsis:void 0,$gotoTextbox:void 0,initEllipsis:function(t){t.hasClass("ellipsis")||t.addClass("ellipsis"),I('<div class="ellipsis-input" data-showing="false"><input class="cs-input" type="text"></div>').appendTo(t)},init:function(){var n=this;this.defaultOptions={startPad:2,endPad:2,delta:2,currentPage:1,maxPages:1,ellipsisTop:!1},this.$el.addClass("cs-pagination-"+this.instanceId),this.$ellipsis=this.$el.find("li.ellipsis:not(.no-popup)"),this.$ellipsis.each(function(){n.initEllipsis(I(this))}),this.$el.on("click","li.ellipsis:not(.no-popup)",function(t){var e=I(this),i=I(t.originalEvent.target);i.hasClass("ellipsis-input")||(i=i.closest(".ellipsis-input")),i.length||n.toggleEllipsisTextbox(e.find(".ellipsis-input"))}),bglib.DomEvents.window.on("click",function(t){if(n.isEllipsisTextboxShowing()){var i=I(t.originalEvent.target);i.hasClass("ellipsis")||(i=i.closest(".ellipsis")),n.$ellipsis.each(function(){var t=I(this),e=t.find(".ellipsis-input");"true"==e.attr("data-showing")&&(!i.length||i.length&&i[0]!=t[0])&&n.hideEllipsisTextbox(e)})}}),this.$el.on("keydown",".ellipsis-input input",function(t){_this=this,13==t.originalEvent.keyCode&&""!=_this.value.trim()&&n.trigger("jumpTo",{target:_this,caller:n,page:_this.value})}),this.$el.on("click","li > a",function(t){var e=I(this).closest("li");e.hasClass("disabled")||e.hasClass("current")||e.hasClass("ellipsis")||n.trigger("itemClick",{target:this,caller:n,originalEvent:t.originalEvent})&&t.preventDefault()}),this.on("renderItem",function(t){n.renderItem(t)}),window["m"+this.instanceId]=this},render:function(t,e){t=(e=e||this.getOption("maxPages"))<(t=t<0?0:t)?e:t,this.setOption("maxPages",e),this.setOption("currentPage",t);var i=this.getPagination(t,e,this.getOption("delta"),this.getOption("startPad"),this.getOption("endPad"));i.unshift("prev"),i.push("next");this.$el.find("li:not(.cs-template)").remove(),console.log(i);for(var n=0;n<i.length;n++){var o=I("<li></li>");if("..."==i[n])this.initEllipsis(o);else{var s="page",a=!1;"prev"==i[n]?(s=i[n],a=t<2):"next"==i[n]&&(s=i[n],a=t==e),s="prev"==i[n]?"prev":s,s="next"==i[n]?"next":s,this.trigger("renderItem",{caller:this,el:o[0],current:t,item:{value:i[n],type:s,disabled:a,current:t==i[n]}})}this.$el.append(o)}},renderItem:function(t){var e=t.item,i="";"page"==e.type?i=e.disabled?'<span data-page="{{page}}">{{page}}</span>':'<a href="?page={{page}}">{{page}}</a>':"prev"==t.type?i=e.disabled?'<span data-page="previous">Previous</span>':'<a href="?page='+(t.current-1)+'">Previous</a>':"next"==t.type&&(i=e.disabled?'<span data-page="next">Next</span>':'<a href="?page='+(t.current+1)+'">Next</a>'),t.el.innerHTML=i,e.disabled&&bglib.El.addClass(t.el,"disabled")},isEllipsisTextboxShowing:function(){var t=!1;return this.$ellipsis.each(function(){"true"==I(this).find(".ellipsis-input").attr("data-showing")&&(t=!0)}),t},toggleEllipsisTextbox:function(t){"true"==t.attr("data-showing")?this.hideEllipsisTextbox(t):this.showEllipsisTextbox(t)},showEllipsisTextbox:function(t){t.attr("data-showing","true"),t.find("input")[0].value="",t.find("input")[0].focus()},hideEllipsisTextbox:function(t){t.attr("data-showing","false")},getPagination:function(t,e,i,n,o){n=n||1,o=o||1;for(var s=t-(i=i||2),a=t+i+1,l=[],r=[],d=-1,c=1;c<=e;c++){(c<=n||e-(o-1)<=c||s<=c&&c<a)&&l.push(c)}for(c=0;c<l.length;c++)-1!=d&&(l[c]-d==2?r.push(c+1):l[c]-d!=1&&r.push("...")),r.push(l[c]),d=l[c];return r}},{handleDataAttr:function(t,e){switch(t){case"max-pages":case"current-page":e=parseInt(e,10)}return e}}),P.Pagination=E,P.autoload.Pagination=P.autoload.factory(E,"[data-pagination]","data-pagination",["max-pages","current-page","start-pad","end-pad","delta","ellipsis-top"]),T=o,_=bglib.jLyte,k=T.BaseComponent.extend({Name:"Tabs",init:function(){var e=this;this.defaultOptions={},this.$el.addClass("cs-tabs-"+this.instanceId),this.selector=".cs-tabs-"+this.instanceId+" > ul li a, .cs-tabs-"+this.instanceId+" > li a",_(document.querySelector("body")).on("click",this.selector,function(t){t.preventDefault(),e.openTab(_(this).closest("li")[0])});var o=this.$el.find("li.active"),s=this.$el.hasClass("vertical-tabs")?"inline-block":"block";return _(this.selector).each(function(t){var e=_(this),i=e.closest("li"),n=!o.length&&0==t;i[0]===o[0]||n?(_(e.attr("href")).css("display",s),i.addClass("active")):_(e.attr("href")).css("display","none")}),this},openTab:function(n){this.$el.find("li.active");var o=this.$el.hasClass("vertical-tabs")?"inline-block":"block";_(this.selector).each(function(t){var e=_(this),i=e.closest("li");i[0]!==n?(_(e.attr("href")).css("display","none"),i.removeClass("active")):(_(e.attr("href")).css("display",o),i.addClass("active"))})}},{}),T.Tabs=k,T.autoload.Tabs=T.autoload.factory(k,"[data-tabs]","data-tabs"),o});